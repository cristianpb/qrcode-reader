{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../../App.svelte"
  ],
  "sourcesContent": [
    "<main>\n  <h1>jsQR Reader</h1>\n  <div id=\"loadingMessage\">ðŸŽ¥ Unable to access video stream (please make sure you have a webcam enabled)</div>\n  <canvas id=\"canvas\" hidden></canvas>\n  {#if ready}\n    <div class=\"output\">\n      {#if message}\n        <p>{message}</p>\n      {:else}\n        <p>No QR code detected.</p>\n      {/if}\n    </div>\n  {/if}\n  {#if hoursDiff > 2}\n    <p class=\"output\">More than {hoursDiff} from now</p>\n  {/if}\n</main>\n\n<script>\n  import jsQR from \"jsqr\";\n  import { onMount } from 'svelte';\n\n  let message\n  let ready\n  let hoursDiff\n\n  onMount(async() => {\n    var video = document.createElement(\"video\");\n    var canvasElement = document.getElementById(\"canvas\");\n    var canvas = canvasElement.getContext(\"2d\");\n    var loadingMessage = document.getElementById(\"loadingMessage\");\n\n    function drawLine(begin, end, color) {\n      canvas.beginPath();\n      canvas.moveTo(begin.x, begin.y);\n      canvas.lineTo(end.x, end.y);\n      canvas.lineWidth = 4;\n      canvas.strokeStyle = color;\n      canvas.stroke();\n    }\n\n    // Use facingMode: environment to attemt to get the front camera on phones\n    navigator.mediaDevices.getUserMedia({ video: { facingMode: \"environment\" } }).then(function(stream) {\n      video.srcObject = stream;\n      video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\n      video.play();\n      requestAnimationFrame(tick);\n    });\n\n    function tick() {\n      loadingMessage.innerText = \"âŒ› Loading video...\"\n      if (video.readyState === video.HAVE_ENOUGH_DATA) {\n        loadingMessage.hidden = true;\n        canvasElement.hidden = false;\n        ready = true;\n\n        canvasElement.height = video.videoHeight;\n        canvasElement.width = video.videoWidth;\n        canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\n        var imageData = canvas.getImageData(0, 0, canvasElement.width, canvasElement.height);\n        var code = jsQR(imageData.data, imageData.width, imageData.height, {\n          inversionAttempts: \"dontInvert\",\n        });\n        if (code) {\n          drawLine(code.location.topLeftCorner, code.location.topRightCorner, \"#FF3B58\");\n          drawLine(code.location.topRightCorner, code.location.bottomRightCorner, \"#FF3B58\");\n          drawLine(code.location.bottomRightCorner, code.location.bottomLeftCorner, \"#FF3B58\");\n          drawLine(code.location.bottomLeftCorner, code.location.topLeftCorner, \"#FF3B58\");\n          message = code.data;\n          console.log(code.data.split(\";\"))\n          let array = code.data.split(\";\")\n          let nom = array[1].split(\":\")[1].trim();\n          let prenom = array[2].split(\":\")[1].trim();\n          let naissance = array[3].split(\":\")[1].trim();\n          let sortie = array[5].split(\":\")[1].trim();\n          let sortieDate = new Date(sortie.substring(6,10), sortie.substring(3,5) - 1, sortie.substring(0,2), sortie.substring(13,15), sortie.substring(16,18))\n          hoursDiff = (new Date() - sortieDate)/( 3600  * 1000 )\n\n        } \n      }\n      requestAnimationFrame(tick);\n    }\n\n  })\n\n</script>\n\n\n<style>\n  body {\n    font-family: 'Ropa Sans', sans-serif;\n    color: #333;\n    max-width: 640px;\n    margin: 0 auto;\n    position: relative;\n  }\n\n  #githubLink {\n    position: absolute;\n    right: 0;\n    top: 12px;\n    color: #2D99FF;\n  }\n\n  h1 {\n    margin: 10px 0;\n    font-size: 40px;\n  }\n\n  #loadingMessage {\n    text-align: center;\n    padding: 40px;\n    background-color: #eee;\n  }\n\n  #canvas {\n    width: 100%;\n  }\n\n  .output {\n    margin-top: 20px;\n    background: #eee;\n    padding: 10px;\n    padding-bottom: 0;\n  }\n\n  #noQRFound {\n    text-align: center;\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "AAwGE,EAAE,eAAC,CAAC,AACF,MAAM,CAAE,IAAI,CAAC,CAAC,CACd,SAAS,CAAE,IAAI,AACjB,CAAC,AAED,eAAe,eAAC,CAAC,AACf,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,IAAI,CACb,gBAAgB,CAAE,IAAI,AACxB,CAAC,AAED,OAAO,eAAC,CAAC,AACP,KAAK,CAAE,IAAI,AACb,CAAC,AAED,OAAO,eAAC,CAAC,AACP,UAAU,CAAE,IAAI,CAChB,UAAU,CAAE,IAAI,CAChB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,CAAC,AACnB,CAAC"
}